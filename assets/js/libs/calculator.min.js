(function(a){MortgageCalculator=function(){this.initialize.apply(this,arguments)};MortgageCalculator.rules={".mc-container":"cursor: default; text-align: left",".mc-title":"font-weight: bold;",".mc-clear":"clear: both",".mc-logo":"float: right; margin: 0 0 5px 0; border: 0",".mc-legend":"display: inline-block; margin: 0 5px 0 0; line-height: 7pt; font-size: 7pt; width: 7pt; height: 7pt",".mc-scroll":"margin: 0; overflow-x: hidden; overflow-y: scroll;",".mc-button":"cursor: pointer; float: right; width: 100%; height: 30px; padding: 1px; border: 1px solid; -moz-border-radius: 4px; -webkit-border-radius: 4px; font-weight: bold;",".mc-footer":"margin: 2px 0 0 0; text-align: right",".mc-navs":{self:"margin: 0; padding: 0; line-height: 25px; font-weight: bold; text-align: center",".mc-nav":"width: 25px; height: 25px; margin: 0; padding: 1px; border: 1px solid; -moz-border-radius: 3px; -webkit-border-radius: 3px; font-weight: bold",},".mc-small":"height: 25px;",".mc-tables":"position: relative; overflow: hidden; height: 132px !important; margin: 10px 0 0 0; text-align: left",".mc-fields":{self:"clear:both; overflow:hidden; margin: 0 10px 0 0","*":"float: left",label:"width: 110px; display:inline-block; line-height: 20px; font-weight: bold; text-align: left",input:"margin: 0 0 5px 0; padding: 2px; width: 90px; border: 1px solid; text-align: right",select:"margin: 0 0 5px 0; padding: 2px; width: 96px; border: 1px solid;",div:"padding: 0 0 0 5px; width: 25px; line-height: 20px; text-align: left",br:"clear: left"},".mc-tabs":{self:"position: absolute; margin: 10px 0 0 0; padding: 0; list-style-type: none; z-index: 100",".mc-tab":"cursor: pointer; float: left; margin: 0; padding: 0 10px 0 10px; line-height: 28px; border: 1px solid; -moz-border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius-bottomleft: 0; -moz-border-radius-bottomright: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-bottom-right-radius: 0; font-weight: bold",".mc-active":"line-height: 28px; border-bottom: 0"},".mc-panes":{".mc-pane":"display: none; position: relative; top: 38px; margin: 0 0 38px 0; padding: 10px; overflow: hidden;","p:first-child":"margin: 0",p:"margin: 1em 0 0 0",a:"font-size: 7.5pt",ul:"margin: 0 0 5px 20px; padding: 0",li:"padding: 1em 0 0 0"},".mc-errors":{self:"margin: 0 0 5px 20px; padding: 0; list-style-type: square",li:"padding: 1em 0 0 0"},".mc-table":{self:"table-layout: fixed; width: 100%; border-collapse: collapse",th:"padding: 0 0 2px 0; font-weight: bold; text-align: center",td:"padding: 0; line-height: 2em; border: 1px solid; text-align: center",sup:"vertical-align: top"},".mc-widget":{".mc-title":"text-align: center",".mc-logo":"float: none; text-align: center",".mc-legend":"margin: 0 4px 0 0; line-height: 5pt; font-size: 5pt; width: 5pt; height: 5pt",".mc-button":"float: none; clear: left; width: 100%; margin: 5px 0 0 0",".mc-footer":"text-align: left",".mc-fields":{self:"margin: 0",label:"margin: 0 0 0 2px; width: 95px; line-height: 18px;",input:"margin: 0 0 4px 0; width: 166px;",select:"margin: 0 0 4px 0; width: 72px;",div:"padding: 0 0 0 4px; width: 18px; line-height: 18px;"},".mc-panes":{".mc-pane":"position: static; top: 0; margin: 10px 0 0 0; padding: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px"},".mc-tab":"line-height: 28px; margin: 0; padding: 0 5px 0 5px; font-weight: bold",".mc-table":{self:"position: absolute",th:"padding: 0; text-align: left",td:"padding: 0 2px 0 2px; line-height: 2em; text-align: right"}}};a.extend(MortgageCalculator.prototype,{F:function(){return false},Z:function(c,d,f){c=this.N(c,f);return isNaN(c)?d:c},N:function(c,d){c=parseFloat(c instanceof a?c.val():c);if(isNaN(c)||!d){return c}d=Math.pow(10,d);return Math.round(c*d)/d},$:function(d){d=this.N(d,2);var h=this.currency;var f=d<0?"-":"",g=parseInt(d=Math.abs(d),10)+"",i=(i=g.length)>3?i%3:0;return h+f+(i?g.substr(0,i)+",":"")+g.substr(i).replace(/(\d{3})(?=\d)/g,"$1,")+"."+Math.abs(d-g).toFixed(2).slice(2)},P:function(c){var d=[];a.each(c,function(b,f){d.push(b+"="+f)});return d.join("&")},B:function(){var c=a.makeArray(arguments),d=c.shift(),f=c.shift();return function(){return f.apply(d,c.concat(a.makeArray(arguments)))}},E:function(f,g,l){var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.",k=[];g=g||Math.max.apply({},f);l=l||4095;for(var m=0;m<f.length;m++){if(f[m]!=null){var o=Math.round(f[m]*l/g),i=Math.floor(o/p.length);o=o-p.length*i;k.push(p.charAt(i)+p.charAt(o))}else{k.push("__")}}return k.join("")},C:function(c){var d=this.colors.value;return a(c).map(function(b,f){return d[f.constructor==Array?f[0]:f].substr(1)}).get().join()},proper:function(c){return c.substr(0,1).toUpperCase()+c.substr(1).toLowerCase()},table:function(c){return a("<table/>").addClass("mc-table").attr({cellspacing:0,cellpadding:0}).appendTo(c)},column:function(c,d,f){a.each(c,function(){a(this).find("tr").find(":nth-child("+d+")")[f?"show":"hide"]()})},row:function(c,d,f){if(d){c.find("tr:nth-child("+d+")")[f?"show":"hide"]()}else{return a("<tr/>").appendTo(c)}},cell:function(c,d){return a("<td/>").css(this.colors.css.table).html(d||"").appendTo(c)},head:function(c,d,f){c=a("<th/>").appendTo(c);f&&this.legend(c,f);return c.append(a("<span/>").text(d)).append("<sup/>")},legend:function(c,d){a("<span/>").addClass("mc-legend").css("background",this.colors.value[d.toLowerCase()]).html("&nbsp;").appendTo(c)},message:function(f,g,j){var l=this,i=l.values,k=i.input;i=i.value;g.find("sup").html(k.pmi>0?" &dagger;":"");if(k.pmi>0){k=i.down>=0.2?"PMI is not included with a down payment of 20% or greater":"PMI is cancelled after "+l.N(i.pmiTerm/12,1).toFixed(1)+" years when 20% of the principal has been paid";f?f.append("&dagger; "+k+"<br/>"):g.attr("title",k)}j.find("sup").html(i.extra>0?" &Dagger;":"");if(i.extra>0){k="The loan is paid off in "+l.N(i.paymentTerm/12,1).toFixed(1)+" years with the extra monthly payments";f?f.append("&Dagger; "+k):j.attr("title",k)}},pane:function(d){var f=this,g=f.objects,h=g.pane;if(f.errors.length>0){d="error"}else{if(!f.processed){return}}f[d]();h&&h.stop().hide();h=g.panes[d];if(f.animate&&h!=undefined){d=f.quirks?f.widget?12:22:0;f=g.pane?g.pane.height()+d:0;g.pane=h.show().data("height",h.data("height")||h.height()+d).height(f+d).preAnim().animate({height:h.data("height")},{duration:750,easing:"mc",complete:h.postAnim})}else{if(h!=undefined){g.pane=h.show()}}},error:function(){var c=this,d=c.objects.errors;if(d){d.empty();a.each(c.errors,function(){a("<li></li>").html(this.replace(/'(.+)'/,"<b>$1</b>")).appendTo(d)})}},payment:function(D){label=function(c,b,d){return a(c).map(function(g,e){return e[1]+" ("+(b[g]*100/d).toFixed(0)+"%)"}).get().join("|")};var E=this,y=E.objects,B=y.payment,w=E.values,z=E.colors,p=E.fields;y=E.widget;var v=B.groups,q=B.headers;if(D){var r=B.index||0;y=B.index=(r+D+v.length)%v.length;z=v[y];var x=B[v[r]].table.stop(true,true);r=B[z].table.stop(true,true);B.title.text(E.proper(z)+(y==2?"":"ly"));if(E.animate){v=(x.width()+10)*D;x.animate({left:v},{duration:750,easing:"mc",complete:function(){x.hide().css("left",0)}});r.css({left:-v}).show().animate({left:0},{duration:750,easing:"mc"})}else{x.hide();r.show()}}else{r=w.value;var H=w.payment;x=H.total;var l=p.taxes.enabled,i=p.insurance.enabled,f=p.pmi.enabled,G=l||i||f,F=i?f?"Ins/PMI":"Insurance":"PMI";if(!H.processed){a.each(v,function(c,b){a.each(q,function(e,d){B[b][d].html(E.$(H[b][d]))})});if(y){a.each(v,function(){var c=B[this],b=c.table;E.message(null,c.head.insurance.find("span:last").text(F).end(),c.head[G?"total":"payment"]);E.row(b,2,l);E.row(b,3,i||f);E.row(b,4,G)});B.tables.height(B.total.table.find("tr:visible").size()*23+(E.browser.opera?2:0))}else{w=B.table;E.message(B.message.empty(),B.head.insurance.find("span:last").text(F).end(),B.total.head);E.column(w,3,l);E.column(w,4,i||f);E.column(w,5,G)}v=E.width-(y?24:44);p=90;w={cht:"p3",chf:"bg,s,"+z.pane.back.substr(1)};if(r.taxes+r.insurance+r.pmi>0){z=[["payment","Payment"]];D=[x.payment];if(r.taxes>0){z.push(["taxes","Taxes"]);D.push(x.taxes)}if(r.insurance>0||r.pmi>0){z.push(["insurance",F]);D.push(x.insurance)}B.legend.show()}else{}if(!y){z=[["principal","Principal"],["interest","Interest"]];D=[x.principal,x.interest];if(r.extra>0){z.push(["extra","Extra"]);D.push(x.extra)}}H.processed=true}}},amort:function(Q){var R=this,N=R.objects,P=N.amort,L=R.values;N=R.colors;var O=R.fields,H=R.widget,K=L.input,I=L.value,J=L.payment,M=J.total,B=L.amort,G=B.month,F=B.year,D=O.taxes.enabled,z=O.insurance.enabled,r=O.pmi.enabled,E=O.extra.enabled;E=E?"Prin/Xtra":"Principal";var i=z?r?"Ins/PMI":"Insurance":"PMI";if(Q){Q=R.popup;K=0;var f=Math.max(Math.ceil(O.count/2),3),p;P=a("<div/>");var l;if(!Q||Q.closed){z=a.browser.msie;B=MortgageCalculator.style;p=z?B.cssText:a(B.cssRules).map(function(){return this.cssText}).get().join("");Q=R.popup=window.open("",z?null:"mc-popup","width=700,height=400,menubar=yes,location=no,status=no,scrollbars=yes");Q.document.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><style type="text/css">body{margin:0;padding: 15px}'+p+'</style></head><body class="mc-container" style="width: auto"></body></html>');Q.document.close()}else{Q.focus()}B=a(Q.document).find("body").empty();l=R.table(P).css("table-layout","auto").width("auto").append('<col width="120"/><col width="140"/><col width="140"/><col width="140"/>');p=[];a.each(O,function(c,b){if(b.enabled){var d=b.label.split("|")[0];b=L.input[c];var e=K%f;e=p[e]||(p[e]=R.row(l));R.head(e,d).css("text-align","left");R.cell(e,c=="term"?b+" years":c=="interest"?b.toFixed(2)+"%":R.$(b)+(c=="taxes"||c=="insurance"?" /yr":c=="pmi"||c=="extra"?" /mo":""));K++}});for(K=O.count;K<f*2;K++){R.head(p[K%f],"").attr("colSpan",2)}l.find("th:odd").css("padding","0 0 0 20px");l=R.table(P).css("margin","15px 0 0 0");p=R.row(l);a.each(["Month",E,"Interest","Taxes",i,"Balance"],function(c,b){R.head(p,b).width(c==0?50:"auto")});for(E=0;E<L.value.paymentTerm;E++){R.cell(p=R.row(l),E+1);a.each([G.principal[E]+G.extra[E],G.interest[E],G.taxes[E],G.insurance[E],G.balance[E]],function(){R.cell(p,R.$(this))})}R.head(p=R.row(l),"Total");R.head(p,R.$(M.principal+M.extra));R.head(p,R.$(M.interest));R.head(p,R.$(M.taxes));R.head(p,R.$(M.insurance));p.find("th").css("padding","10px 0 0 0");l.find("td:last-child").css({background:N.value.total,borderLeftWidth:2}).end().find("tr:nth-child(12n+2):not(:first) td").css({borderTopWidth:2});R.column(l,4,D);R.column(l,5,z||r);B.append(P.html());H||window.setTimeout(function(){Q.print()},100)}else{if(!H){if(!B.processed){l=P.table;H=P.head;O=P.foot;a.each(l.find("tr"),function(c){var b=a(this);c<I.paymentTerm?b.show().children(":first").next().text(R.$(G.principal[c]+G.extra[c])).next().text(R.$(G.interest[c])).next().text(R.$(G.taxes[c])).next().text(R.$(G.insurance[c])).next().text(R.$(G.balance[c])):b.hide()});R.column([H,l,O],4,D);R.column([H,l,O],5,z||r);O.find("th:first").next().text(R.$(M.principal+M.extra)).next().text(R.$(M.interest)).next().text(R.$(M.taxes)).next().text(R.$(M.insurance));H.principal.find("span:last").text(E);R.message(P.message.empty(),H.insurance.find("span:last").text(i).end(),H.total);Q=R.width-44;H=130;G=J.year.total;M=["principal","interest"];I.extra>0&&M.unshift("extra");I.taxes>0&&M.push("taxes");if(I.pmi>0||I.insurance>0){M.push("insurance")}N={cht:"bvs",chm:"D,"+N.value.balance.substr(1)+","+M.length+",0,2,0",chbh:"a,4",chs:Q+"x"+H,chxt:"x,y",chxl:"0:|"+function(c,b){for(;b++<=L.input.term;){c.push(b)}return c.join("|")}([],0)+"|1:|$0|$"+J.month.total.toFixed(0),chf:"bg,s,"+N.pane.back.substr(1),chco:R.C(M),chd:"e"+M.length+":"+(I.extra>0?R.E(F.extra,G)+",":"")+R.E(F.principal,G)+","+R.E(F.interest,G)+(I.taxes>0?","+R.E(F.taxes,G):"")+(I.pmi>0||I.insurance>0?","+R.E(F.insurance,G):"")+","+R.E(F.balance)};B.processed=true}}}},validate:function(){V=function(q,r,e,b,c){if(d.fields[q].enabled){q=i[q];var l=q.val(),h=q.data("label"),p;if(l.length>0){l=parseFloat(l);if(isNaN(l)){p="The '"+h+"' field must be a number."}else{if(l<e||l>b){p="The '"+h+"' field must be "+(l<e?"greater":"less")+" than or equal to "+(l<e?e:b).toFixed(r)+"."}}}else{if(c){p="The '"+h+"' field is required."}}q.css("background",d.colors.input[p?"error":"back"]).attr("title",p);p&&f.push(p)}};var d=this,f=d.errors,i=d.objects,j=d.bounds;f.length=0;V("principal",2,j.min.principal||0,j.max.principal||Number.MAX_VALUE,true);V("interest",2,j.min.interest||0,j.max.interest||Number.MAX_VALUE,true);V("term",0,j.min.term||0,j.max.term||Number.MAX_VALUE,true);var g=d.Z(i.principal,Number.MAX_VALUE);V("down",2,j.min.down||0,j.max.down||g,false);V("taxes",2,j.min.taxes||0,j.max.taxes||g,false);V("insurance",2,j.min.insurance||0,j.max.insurance||g,false);V("pmi",2,j.min.pmi||0,j.max.pmi||g,false);V("extra",2,j.min.extra||0,j.max.extra||g,false);return f.length==0},calculate:function(){add=function(c,b,d){c[b]=(c[b]||0)+d};accum=function(b){return Math.pow(1+x.interest,b-x.term)};paid=function(d){var c,e=x.extra,b;if(e==0){c=accum(d-1);d=x.payment*(1-c);c=x.payment*c}else{b=x.balance;d=z.N(x.interest*b,2);c=x.payment-d;if(b-c-e<0){if(b>c){e=b-c}else{c=b;e=0}}x.balance=b-c-e}return{interest:d,principal:c,extra:e}};balance=function(b){if(x.extra==0){return x.payment*(1-accum(b))/x.interest}return x.balance};var z=this,B=z.objects,w=z.values,y=z.fields,u=w.input={},x=w.value={},p=w.payment={month:{},year:{}},t=p.total={principal:0,extra:0,interest:0},q=w.amort={},r=q.month={principal:[],extra:[],interest:[],taxes:[],insurance:[],balance:[]};q=q.year={principal:[],extra:[],interest:[],taxes:[],insurance:[],balance:[]};if(!z.validate()){return z.pane("error")}a.each(y,function(b){u[b]=z.Z(B[b],0)});x.principal=u.principal;x.interest=u.interest/1200;x.term=u.term*12;x.down=u.down/u.principal;x.taxes=z.N(u.taxes/12,2);x.insurance=z.N(u.insurance/12,2);x.pmi=x.down>=0.2?0:u.pmi;x.pmiTerm=x.term;x.extra=u.extra;x.balance=u.principal-u.down;x.payment=z.N(x.balance*x.interest/(1-accum(0)),2);x.paymentTerm=0;for(y=1;y<=x.term;y++){var v=paid(y),D=balance(y),l=Math.floor((y-1)/12),i=x.taxes,f=x.insurance+(y>x.pmiTerm?0:x.pmi);if(D==0&&v.principal>0){v.principal+=z.N(x.principal-t.principal-v.principal-t.extra-v.extra,2)}r.principal.push(v.principal);r.extra.push(v.extra);r.interest.push(v.interest);r.taxes.push(i);r.insurance.push(f);r.balance.push(D);add(q.principal,l,v.principal);add(q.extra,l,v.extra);add(q.interest,l,v.interest);add(q.taxes,l,i);add(q.insurance,l,f);q.balance[l]=x.paymentTerm?null:D;t.principal+=v.principal;t.extra+=v.extra;t.interest+=v.interest;if(y<x.pmiTerm&&D<x.principal*0.8){x.pmiTerm=y}if(!x.paymentTerm&&D==0){x.paymentTerm=y}}q.balance[Math.ceil(x.paymentTerm/12)-1]=0;r=p.month;r.payment=x.payment+x.extra;r.taxes=x.taxes;r.insurance=x.insurance+x.pmi;r.total=z.N(r.payment+r.taxes+r.insurance,2);q=p.year;q.payment=z.N(r.payment*12,2);q.taxes=z.N(r.taxes*12,2);q.insurance=x.pmiTerm<12?z.N(x.insurance*12+x.pmi*x.pmiTerm,2):z.N(r.insurance*12,2);q.total=z.N(q.payment+q.taxes+q.insurance,2);t.payment=t.principal+t.extra+t.interest;t.taxes=z.N(r.taxes*x.term,2);t.insurance=z.N(x.insurance*x.term+x.pmi*x.pmiTerm,2);t.total=z.N(t.payment+t.taxes+t.insurance,2);z.processed=true;w.payment.processed=w.amort.processed=null;z.pane(z.widget?"payment":B.tab.data("id"))},build:function(){field=function(c,b,e,h,j,g){h=h.split("|");a("<label/>").attr("title",j).text(h[J?h.length-1:0]).click(function(){R[e].focus()}).appendTo(c);R[e]=a("<"+b+"/>").css(O.css.field).data("id",e).data("label",h[0]).focus(function(){a(this).select()}).blur(function(m){m=m.target;if(m.type=="text"){m=a(m);var k=parseFloat(m.val());if(isNaN(m.val())){k=m.val();k=k.replace(",","");k=parseFloat(k);m.val(k.toFixed(e=="term"?0:2))}else{isNaN(k)||m.val(k.toFixed(e=="term"?0:2))}}}).keypress(function(k){if(k.which=="13"){k=a(k.target);k.trigger(k.data("id")=="principal"?"change":"blur");Q.calculate()}}).appendTo(c);if(b=="select"){h=I.min[e];b=R[e].append(a("<option/>").val(""));j=I.step[e];for(var d=(d=j.toString().split("."))[1]?d[1].length:0;h<=I.max[e];h+=j){a("<option/>").val(h).text(Q.N(h).toFixed(d)).appendTo(b)}}a("<div/>").text(g||"").appendTo(c);a("<br/>").appendTo(c)};button=function(c,b){var d=Q.browser;d=d.msie||d.opera;return a("<button/>").addClass("button flat radius").css(O.css.button).text(b).mousedown(d?Q.F:function(e){a(e.target).addClass("mc-pressed")}).mouseup(d?Q.F:function(e){a(e.target).removeClass("mc-pressed")}).appendTo(c).click(function(e){e.preventDefault()})};navMC=function(c,b){return button(c,b).removeClass("mc-button").addClass("mc-nav").css(O.css.navMC).css("float",b=="<"?"left":"right").click(Q.B(Q,Q.payment,b=="<"?-1:1))};tab=function(c,b,d,e){c=R.tabs[b]=a("<li/>").addClass("mc-tab").css(O.css.tab(e)).data("id",b).text(d).click(function(h){R.tab.css(O.css.tab()).removeClass("mc-active");h=(R.tab=a(h.target).css(O.css.tab(true)).addClass("mc-active")).data("id");var g=h=="payment"?0:5;a.each(R.panes,function(){this.css({"-moz-border-radius-topleft":g,"-webkit-border-top-left-radius":g})});Q.pane(h)}).mousedown(Q.F).bind("selectstart",Q.F).appendTo(c);if(e){R.tab=c.addClass("mc-active")}};pane=function(h,g,c,e,j,b,k){h=R.panes[g]=a("<div/>").addClass("mc-pane").css(O.css.pane).data("id",g).appendTo(h);var d=h.show,m=h.hide;h.show=Q.B(h,function(){d.apply(this);this.data("height",null).height("auto");e&&e.apply(this);return this});h.hide=Q.B(h,function(){m.apply(this);j&&j.apply(this);return this});h.preAnim=Q.B(h,function(){b&&b.apply(this);return this});h.postAnim=Q.B(h,function(){k&&k.apply(this);return this});if(c){R.pane=h.show()}return h};graph=function(c,b){return a("<img/>").addClass("mc-graph").attr("title",b).appendTo(c)};clear=function(b){a("<div/>").addClass("mc-clear").appendTo(b)};var Q=this,R=Q.objects,N=R.payment={head:{}},P=R.amort={},L=Q.logo,O=Q.colors,H=Q.fields,K=Q.defaults,I=Q.bounds,J=Q.widget,M=R.obj.addClass("mc-container"+(J?" mc-widget":"")).width(Q.width),B=Q.browser,G=N.groups=["month","year","total"],F=N.headers=["payment","taxes","insurance","total"],D=P.headers=["month","principal","interest","taxes","insurance","balance"];Q.title&&a("<div/>").addClass("mc-title").css(O.css.title).html(Q.title).appendTo(M);M=a("<div/>").addClass("mc-body").css(O.css.body).append("<div/>").appendTo(M);if(L.path){var z=a("<img/>").addClass("mc-logo").attr("src",L.path).appendTo(M);if(L.url){z.wrap(a("<a/>").attr({href:L.url,target:L.target||"_blank"}))}}var r,E=0,i=Math.max(Math.ceil(H.count/2),3);a.each(H,function(c,b){if(b.enabled){E++%i||(r=a("<div/>").addClass("mc-fields").appendTo(M));field(r,b.type,c,b.label,b.desc,b.suffix)}});button(M,"Calculate").css("width",160).click(Q.B(Q,Q.calculate));if(!J){clear(M);var f=a("<ul/>").addClass("mc-tabs").appendTo(M);tab(f,"payment","Payments",true);tab(f,"amort","Amortization Schedule")}M=a("<div/>").addClass("mc-panes").appendTo(M);if(J){L=pane(M,"payment");D=a("<div/>").addClass("mc-navs").css("color",O.tab.text).appendTo(L);var p;navMC(D,"<");navMC(D,">");N.title=a("<span/>").text("Monthly").appendTo(D);p=N.tables=a("<div/>").addClass("mc-tables").appendTo(L);a.each(G,function(c,b){var d=N[b]={head:{}},e=d.table=Q.table(p).css("display",c==0?"table":"none");a.each(F,function(j,h){var g=Q.row(e);d.head[h]=Q.head(g,Q.proper(h),j==3?null:h);d[h]=Q.cell(g).css({background:j==3?O.value.total:O.table.back,borderTopWidth:j==3?2:1})})});N.legend=L.find(".mc-legend");a("<a/>").css(O.css.link).attr("href","#").html("Amortization schedule").click(Q.B(Q,Q.amort,true)).appendTo(L).wrap(a("<div/>").css("margin","10px 0 0 0"))}else{pane(M,"intro",true).html(Q.intro);pane(M,"error").html("<p><b>Oops, there seems to some problems with the values you have entered:</b></p>").append(R.errors=a("<ul/>").addClass("mc-errors"));L=pane(M,"payment");f=N.table=Q.table(L);var l=Q.row(f);a.each([""].concat(F),function(c,b){N.head[b]=Q.head(l,Q.proper(b),c>0&&c<4?b:null).width(c==0?70:"auto")});a.each(G,function(c,b){var d=N[b]={},e=Q.row(f);d.head=Q.head(e,Q.proper(b)+(c<2?"ly":"")).css({textAlign:"left",padding:"0"});a.each(F,function(g){d[this]=Q.cell(e).css({background:b=="total"||g==3?O.value.total:O.table.back,borderLeftWidth:g==3?2:1,borderTopWidth:b=="total"?2:1})})});N.legend=L.find(".mc-legend");N.message=a("<div/>").addClass("mc-message").css("padding","4px 0 0 70px").appendTo(L);L=pane(M,"amort",false,function(){if(!this.shown){var c=Q.browser,b=P.table,d=b.width();P.head.width(d);P.foot.width(d);c.mozilla&&b.width(d-1);P.scroll.height(c.msie?b.find("tr:nth-child(12)").position().top:b.find("tr:first").height()*12+1);this.shown=true}},null,function(){if(Q.animate&&Q.browser.mozilla){this.height(P.scroll.position().top+P.scroll.height());P.table.hide()}},function(){Q.animate&&Q.browser.mozilla&&P.table.show()});f=P.head=Q.table(L);l=Q.row(f);a.each(D,function(c,b){P.head[b]=Q.head(l,Q.proper(b),c<1?null:b).width(c==0?50:"auto")});f=P.table=Q.table(P.scroll=a("<div/>").addClass("mc-scroll").height(100).appendTo(L));for(G=1;G<=I.max.term*12;G++){f.append("<tr><td>"+G+"</td><td/><td/><td/><td/><td/></tr>")}f.find("td").css(O.css.table).eq(0).width(50);f.find("td:last-child").css({background:O.value.total,borderLeftWidth:2}).end().find("tr:nth-child(12n+1):not(:first) td").css({borderTopWidth:2});f=P.foot=Q.table(L);l=Q.row(f);P.head.total=Q.head(l,"Total").width(50);l.append("<th/><th/><th/><th/>");button(Q.head(l).css("padding","5px 0 0 0"),"Print").addClass("mc-small").click(Q.B(Q,Q.amort,true));P.legend=L.find(".mc-legend");P.message=a("<div/>").addClass("mc-message").appendTo(L)}Q.footer&&a("<div/>").addClass("mc-footer").css(O.css.footer).html(Q.footer).appendTo(R.obj);M=R.obj;if(B.msie){M.find("p:first").css("margin","0");M.find(".mc-nav").css("line-height","20px");Q.quirks&&M.find("input").width(M.find("select").width()+6)}else{if(B.opera){M.find(".mc-button").css("line-height","26px");M.find(".mc-nav").css("line-height","22px")}else{if(B.mozilla){M.find("table").css("margin","1px 0 0 "+(J?"0":"1px"))}}}R.principal.change(function(b){b=a(b.target).trigger("blur");b=parseFloat(b.val());if(!isNaN(b)){H.taxes.enabled&&K.taxes&&R.taxes.val((b*K.taxes/100).toFixed(2));H.insurance.enabled&&K.insurance&&R.insurance.val((b*K.insurance/100).toFixed(2));H.down.enabled&&K.down&&R.down.val((b*K.down/100).toFixed(2))}}).val(Q.Z(K.principal,"")).trigger("change");R.interest.val(Q.Z(K.interest,"")).trigger("blur");R.term.val(Q.Z(K.term,"")).trigger("blur");H.pmi.enabled&&R.pmi.val(Q.Z(K.pmi,"")).trigger("blur");H.extra.enabled&&R.extra.val(Q.Z(K.extra,"")).trigger("blur")},initialize:function(f,g){var l=this;g=g;var p=g.colors,k=g.fields,m=g.defaults,o=g.bounds,i=navigator.userAgent.toLowerCase();a.each([m,o.min,o.max,o.step],function(){var b=this;a.each(b,function(c,d){b[c]=l.N(d,c=="term"?0:2)})});a.each(p,function(){var b=this;a.each(b,function(c,d){d=d?d.toLowerCase().replace("transparent","").replace(/#?(.+)/,"#$1"):"";if(d.length==4){d=d.replace(/([0-9a-f])/g,"$1$1")}b[c]=d})});a.extend(p.css={},{title:{color:p.title.text,background:p.title.back},body:{color:p.main.text,background:p.main.back,borderColor:p.main.border},field:{color:p.input.text,background:p.input.back,borderColor:p.input.border},button:{color:p.button.text,background:p.button.back,borderColor:p.button.border},navMC:{color:p.navMC.text,background:p.navMC.back,borderColor:p.navMC.border},tab:function(b){return{color:p[b?"tab":"main"].text,background:b?p.tab.back:"transparent",borderColor:b?p.tab.border:"transparent"}},pane:{color:p.pane.text,background:p.pane.back,borderColor:p.pane.border},table:{color:p.table.text,background:p.table.back,borderColor:p.table.border},footer:{color:p.footer.text,background:p.footer.back},link:{color:p.link.text}});k.principal.enabled=k.interest.enabled=k.term.enabled=true;a.each(k,function(b,c){if(c.type=="select"&&isNaN(o.min[b]+o.max[b]+o.step[b])){c.type="input"}k.count=(k.count||0)+(c.enabled?1:0)});a.each(g,function(b,c){l[b]=c});l.widget=l.mode=="widget";l.width=l.Z(g.width,l.widget?"auto":680);l.quirks=document.compatMode=="BackCompat";l.browser=a.extend({},a.browser,{chrome:/chrome/.test(i),safari:/webkit/.test(i)&&!/chrome/.test(i)});l.objects={obj:a(f),tabs:{},panes:{},navMC:{}};l.values={};l.errors=[];l.google="http://chart.apis.google.com/chart?";l.build()}});a.fn.MortgageCalculator=function(d){var f=null,g=MortgageCalculator,h=a.easing;f={mode:"normal",animate:true,width:f,title:f,intro:"<p>With this calculator you can put in your values and estimate the amount of your loan and get an estimate on the amount of your monthly payments.</p><p>Click on the 'Calculate' button when you're ready.</p>",footer:f,currency:"$",logo:{path:f,url:f,target:f},colors:{main:{text:"#000",back:"#",border:"#39c"},title:{text:"#39c",back:f},tab:{text:"#39c",back:"#fff",border:"#39c"},pane:{text:"#000",back:"#fff",border:"#39c"},input:{text:"#000",back:"#fff",border:"#aaa",error:"#fcc"},button:{text:"#fff",back:"#46a026",border:"#1f731a"},navMC:{text:"#fff",back:"#39c",border:"#39c"},table:{text:"#000",back:"#fff",border:"#aaa"},footer:{text:"#999",back:f},link:{text:"#39c"},value:{payment:"#6a9f35",taxes:"#0584af",insurance:"#ff9300",total:"#eee",principal:"#6a9f35",extra:"#90d948",interest:"#f00",balance:"#333"}},fields:{principal:{enabled:true,type:"input",label:"Principal",desc:"The total value of the loan"},interest:{enabled:true,type:"input",label:"Interest Rate|Interest",desc:"The annual interest rate of the loan",suffix:"%"},term:{enabled:true,type:"select",label:"Term",desc:"The term of the loan (in years)",suffix:"yrs"},down:{enabled:true,type:"input",label:"Down Payment|Down",desc:"The down payment on the loan"},taxes:{enabled:true,type:"input",label:"Property Taxes|Taxes",desc:"The annual property taxes",suffix:"/yr"},insurance:{enabled:true,type:"input",label:"Insurance",desc:"The annual homeowner's insurance",suffix:"/yr"},pmi:{enabled:true,type:"input",label:"PMI",desc:"The monthly private mortgage insurance",suffix:"/mo"},extra:{enabled:true,type:"input",label:"Extra Payment|Extra",desc:"Extra to pay to the principal per month",suffix:"/mo"}},defaults:{principal:f,interest:f,term:f,down:f,taxes:1.5,insurance:0.5,pmi:f,extra:f},bounds:{min:{principal:0,interest:0,term:15,down:f,taxes:f,insurance:f,pmi:f,extra:f},max:{principal:15000000,interest:15,term:40,down:f,taxes:f,insurance:f,pmi:f,extra:f},step:{principal:f,interest:f,term:5,down:f,taxes:f,insurance:f,pmi:f,extra:f}}};if(!g.style){(function(e,i,k,c){var b=arguments.callee;c=c||0;a.each(i,function(j,l){j=(k?k+" ":"")+(j=="self"?"":j);if(typeof l=="object"){c=b(e,l,j,c)}else{if(a.browser.msie){e.addRule(j,l,c++)}else{e.insertRule(j+" {"+l+"}",c++)}}});return c})(g.style=a("<style/>").attr("type","text/css").appendTo("head").get(0)[a.browser.msie?"styleSheet":"sheet"],g.rules)}h.mc||a.extend(h,{mc:function(e,i,k,c,b){return c*Math.sqrt(1-(i=i/b-1)*i)+k}});d=a.extend(true,{},f,d);this.each(function(){new MortgageCalculator(this,d)});return this}})(jQuery);