var bonIconUtil;(function(b){var a=bonIconUtil={chooseIcon:"bon-choose-icon",removeIcon:"bon-remove-icon",iconFieldset:"bon-icon-fieldset",iconInputField:"bon-icon-input",iconPlaceholder:"bon-icon-placeholder",iconCell:"bon-icon-cell",iconEmpty:"bon-no-icon",modalHolder:"bon-icon-modal",modalOverlay:"bon-icon-modal-overlay",modalLoader:"bon-modal-loader",modalClose:"bon-close-icon-popup",modalClass:"bon-icon-font-modal",init:function(){this.chooseIconAction();this.removeIconAction();this.changeIconAction();this.selectIconAction();this.closeIconPopUp()},iconModal:function(){if(b("#"+a.modalHolder).length<1){var c='<div id="'+a.modalOverlay+'"></div><div id="'+a.modalHolder+'"><div id="'+a.modalLoader+'" class="bonicons bi-spinner bi-spin"></div></div>';b("body").append(c)}else{b("#"+a.modalHolder+", #"+a.modalOverlay).show()}},removeIconAction:function(){b("body").on("click","."+a.removeIcon,function(e){var d=b(this);var c=d.closest("."+a.iconFieldset);c.find("."+a.iconInputField).val("");c.find("."+a.iconPlaceholder).addClass(a.iconEmpty).find("i").attr("class","");c.find("."+a.removeIcon).addClass(a.chooseIcon).removeClass(a.removeIcon).val(bon_util_ajax.choose_icon);e.preventDefault()})},chooseIconAction:function(){b("body").on("click","."+a.chooseIcon,function(g){var e=b(this);var c=e.closest("."+a.iconFieldset);var i=e.data("id");var d=b(window).outerWidth();var h=b(window).outerHeight();a.iconModal();b("#"+a.modalHolder).css({width:d,height:h,position:"fixed","z-index":"100110",top:"10%",left:"0","overflow-y":"auto"});b("#"+a.modalOverlay).css({opacity:0.7,height:h,width:d,position:"fixed",left:"0px",top:"0px","z-index":"100109"});var f=c.find("#bon_icon_nonce").val();b.post(bon_util_ajax.url,{action:"bon_icon_selection",nonce:f,},function(j){j='<div class="'+a.modalClass+'" data-id="'+i+'"><div class="bon-icon-font-popup">'+j+'<span class="'+a.modalClose+'">x</span></div></div>';b("#"+a.modalHolder).find("#"+a.modalLoader).remove().end().find("."+a.modalClass).remove().end().append(b(j))});g.preventDefault()})},closeIconPopUp:function(){b("body").on("click","#"+a.modalHolder+" ."+a.modalClose,function(c){b("#"+a.modalHolder+", #"+a.modalOverlay).hide();c.preventDefault()})},changeIconAction:function(){b("body").on("change","."+a.iconInputField,function(){var c=b(this);c.siblings("."+a.iconPlaceholder).removeClass(a.iconEmpty).find("i").attr("class","").addClass("bonicons "+c.val())})},selectIconAction:function(){b("body").on("click","."+a.iconCell,function(d){var f=b(this).parents("."+a.modalClass).data("id");var c=b(this).data("icon");var e=b(f);e.find("."+a.iconInputField).val(c);e.find("."+a.iconPlaceholder).removeClass(a.iconEmpty).find("i").attr("class","").addClass("bonicons "+c);e.find("."+a.chooseIcon).addClass(a.removeIcon).removeClass(a.chooseIcon).val(bon_util_ajax.remove_icon);b("#"+a.modalHolder+", #"+a.modalOverlay).hide();d.preventDefault()})}};b(document).ready(function(){bonIconUtil.init()})})(jQuery);